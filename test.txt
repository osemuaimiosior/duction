#Delete a cluster
kind delete cluster --name duction

kubectl apply -f kube/localStorageClass.yaml


# Download fabric-ca-client locally

curl -sSL https://bit.ly/2ysbOFE | bash -s
export PATH=$PWD/bin:$PATH

# ENV substitution (simple envsubst): example

let content = fs.readFileSync(filePath, "utf8");
content = content.replace(/\$\{(\w+)\}/g, (_, name) => process.env[name] || "");

#Cert manager download
curl -L   -o cert-manager.yaml   https://raw.githubusercontent.com/jetstack/cert-manager/v1.19.1/deploy/manifests/cert-manager.yaml
curl -L   -o cert-manager.yaml https://github.com/cert-manager/cert-manager/releases/download/v1.19.1/cert-manager.yaml
curl -LO https://github.com/cert-manager/cert-manager/releases/download/v1.19.2/cert-manager.yaml

kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.19.2/cert-manager.yaml


# Multi-cloud deployment
1. AWS describe-availability-zones. 
2. GCP list-zones.
3. Azure list-locations.
4. DigitalOcean doctl compute region list.

#Edit wallet seceret
kubectl edit secret wallet -n default

How to save and exit (if using vi or vim)

Press i â†’ to enter insert mode (you can now type or paste)

After editing, press Esc

Type :wq (write & quit)

Press Enter

# Get base64 cert pem code
cat orderer0.pem | base64 -w0

#fabric peer and orderer docker image build

docker build -t <image name> -f images/peer/Dockerfile .
docker tag <image name>:<tag> <docker account name>/<image name>:<tag>
docker push <docker account name>/<image name>:<tag>


kubectl describe fabriccas.hlf.kungfusoftware.es org1-ca -n default

export PEER_IMAGE=hyperledger/fabric-peer
export PEER_VERSION=3.1.0

export ORDERER_IMAGE=hyperledger/fabric-orderer
export ORDERER_VERSION=3.1.0

export CA_IMAGE=hyperledger/fabric-ca
export CA_VERSION=1.5.15

#Get pods
kubectl get pods -n default

#Get secret in kubernetese
kubectl get secret wallet -n default

#Get FabricFollowerChannel
kubectl get FabricFollowerChannel
kubectl describe FabricFollowerChannel demo-main-branchmsp

#Check nodes
kubectl get fabricorderernodes.hlf.kungfusoftware.es -A

#Get service
kubectl get svc -n default


#Get all peers
kubectl get fabricpeers.hlf.kungfusoftware.es -n default

#Get and describe pods
kubectl describe pod <pod-name> -n default

#Delet CA from svc and verify
kubectl delete fabriccas.hlf.kungfusoftware.es org1-ca -n default
kubectl get fabriccas.hlf.kungfusoftware.es -n default

#Checking logs
kubectl logs deploy/org1-peer0

#Ordering node
kubectl get fabricorderernodes.hlf.kungfusoftware.es -n default

#Get channel
kubectl get fabricmainchannel -A

#Get certificate
kubectl get fabricorderernodes central-bank-node0 -o=jsonpath='{.status.tlsCert}' > orderer0-tls.pem
kubectl get fabricorderernodes central-bank-node1 -o=jsonpath='{.status.tlsCert}' > orderer1-tls.pem
kubectl get fabricorderernodes central-bank-node2 -o=jsonpath='{.status.tlsCert}' > orderer2-tls.pem
kubectl get fabricorderernodes central-bank-node3 -o=jsonpath='{.status.tlsCert}' > orderer3-tls.pem
etc

kubectl delete all --all --all-namespaces







